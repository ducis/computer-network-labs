<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="stylesheet" type="text/css" href="ns2.proj1_files/style.css">
   <title>NS2 Assignment 1</title>
</head><body>

<h1>Network Simulation with NS-2</h1>


<h2>Introduction -- why Network Simulation?</h2>

<p>
Performance evaluation is a critical component of systems research
that allows the evaluation of new ideas, identification of problems
and bottlenecks and optimization of existing systems.  There are three
general approaches to performance evaluation: (1) prototyping: build
it (or a scaled down version of it) and see how it works; (2)
analytical modeling: build a mathematical model of it and use it to
analyze the system; and (3) Simulation: build a software model of the
system.  
</p>

<p>
Prototyping is often not feasible, or time consuming especially for
large scale systems; it also provides limited controllability and
observability.  Similarly, analytical modeling cannot capture highly
complex systems.  Thus, simulation has emerged as an attractive
alternative that is heavily used in performance evaluation of computer
systems.  For this reasons, we are doing a common set of projects in a
simulator, before we break off into research or non-research project
(your choice) for the final project.
</p>

<p>
Network simulation enables us to predict behavior of a large-scale and
complex network system such as the Internet at low cost under different
configurations of interest and over long periods. Many network
simulators, such as NS-2, SSFNet, Opnet, Qualnet, etc., are widely
available. We will use NS-2 for this project. 
</p>

<p>
NS-2 is a discrete event simulator written in C++, with an OTcl
interpreter shell as the user interface that allows the input model
files (Tcl scripts) to be executed. Most network elements in NS-2 are
developed as classes, in object-oriented fashion. The simulator
supports a class hierarchy in C++,&nbsp; and a very similar class
hierarchy in OTcl.  The root of this class hierarchy is the TclObject
in OTcl. Users create new simulator objects through the OTcl
interpreter, and then these objects are mirrored by corresponding
objects in the class hierarchy in C++. NS2 provides substantial
support for simulation of TCP, routing algorithms, queueing
algorithms, and multicast protocols over wired and wireless (local and
satellite) networks, etc. It is freely distributed, and all source
code is available.  In the first project, you will not need to worry
about the internals of NS-2 (we leave that to the second project).
</p>

<p>Developing new networking protocols and creating simulation scripts
are complex tasks, which requires understanding of the NS-2 class
hierarchy, C++, and Tcl programming. However, in this project, you
only need to design and run simulations in Tcl scripts using the
simulator objects without changing NS2 core components such as class
hierarchy, event schedulers, and other network building blocks. You
should put all your results in the files with given names. For your
report, you do not need to rewrite the assumptions given in this
document, but should provide any information not already given to you.
</p>

<p>
You must submit the relevant Tcl programs, Awk (or perl/python etc..)
scripts, and reports for each problem.  
</p>


<h2>Instructions and Preliminaries</h2>

<ul>
<li>
You are going to work on your own for this project.</li>

<li>
<b>Read the specifications carefully. Check periodically for updates.
If you have any doubts, do not hesitate to contact us.</b></li>

<li><b> Get this taken care of Immediately</b> You need a place to
work.  If you want to download and compile NS-2 all in one
distribution, you will need a linux/unix account with roughly
200MBytes (ideally 300+) of free space for the full distribution.
With some work, you can get away with less space (see below).  <ul>
<li> If you do not have access to such an account (on your own machine
or in school), please work on the provided testbed.
</li>
</ul>

</li><li> The tarred/gzipped file <a href="https://jingyu.dyndns.org/%7Ejzhou/courses/F11.Networks/assignments/ns2.tgz">ns2.tgz</a>
provides a sample scenario file, and some awk files to process the
traces.  On a linux/unix machine you can untar the file using:
<pre> $ tar -xvfz ns2.tgz
</pre>
The files are inside directories task1 for part 1 and task2 for part 2</li>
</ul>

<h2>Task I: Bandwidth Share of TCP and UDP Traffic (50%)</h2>

<br>Consider a network with 4 nodes, as shown in Figure 1. The link between
node 3 and node 4 has a speed of 1 Mbps. All other links have a speed of
2 Mbps. All links have a propagation delay of 10 ms and a Drop Tail buffer.
There is a TCP/FTP flow from node 1 to node 4, and a UDP/CBR (Constant
Bit Rate) flow from node 2 to node 4. Both start at 0.1 second, and end
at 5 seconds. The packet length for both flows is 1500 Bytes. The rate
of the UDP/CBR flow is 0.2 Mbps. The queue buffer size for the link from
node 3 to node 4 is 4 packets. There is no other traffic in the network
other than that described above.
<p></p><center><img src="ns2.proj1_files/fig1.jpg" height="210" width="398">
<br>Figure 1</center>

<p>You are given a sample file (task1_sample.tcl) to simulate the above-mentioned
network. Run the simulation for 5 seconds by typing "ns task1_sample.tcl",
and then we obtain an output trace file, task1_out.nam. You need to understand
the trace format and be able to extract meaningful performance metrics
from such files by using Awk, Perl, etc. Take a look at "task1_out.nam".
Ignore entries with -t *; these entries are used by nam to visualize the
network topology. The rest of the entries look like:
</p><ul>
<li>
[event type] -t [time] -s [src node] -d [dst node] -p [pkt type] -e [pkt
size] -c [color] -i [pkt id] -a [flow id] -x {[src.port] [dst.port] [seqno]
------- null}</li>
</ul>
The fields in the trace file are: type of the event, simulation time when
the event occurred, source and destination nodes, packet type (protocol,
action or traffic source), packet size, color type, packet ID, flow identifier,
source and destination addresses, sequence number, and packet id. Note
that the internal identifier numbers for node 1, node 2, node 3, and node
4 are 0, 1, 2, and 3, respectively. The event type "+", "-", "r", and "d"
represent enqueue operations, dequeue operations, receive events, and drop
events, respectively. More information about name formats can be found in the <a href="http://isi.edu/nsnam/ns/doc-stable/node227.html"> nam trace section of the Ns-2 manual</a>.

You
can use
Awk to answer the following questions, or you can use other languages
such
as perl or python (or really C/C++/Java) to compute these metrics if
you prefer, but you are on your own. Sample perl scripts are available
with the ns-2 distribution.
<ul>
<li>
If we want to extract information from the "task1_out.nam" file and compute
the total bytes of&nbsp; TCP/FTP traffic over the link from node 3 to node
4, we run the following Awk command (in file "task1_tcp.awk"):</li>

<br><tt>awk '$1== "r" &amp;&amp; $7==3 &amp;&amp; $17==1 &amp;&amp; $9=="tcp"
{a += $11} END {print a}' task1_out.nam</tt>
<p>In this command, "$1", "$7", "$17", and "$9" mean the 1st (event type),
7th (destination node), 17th (flow identifier) , and 9th (packet type)
columns of each line in file "task1_out.nam". "a" is an Awk variable that
is used to calculate the total bytes. Awk scans the input file "task1_out.nam"
line by line, and parses the line column by column.
<br>&nbsp;
</p><li>
Similarly, you can run the following Awk command (in file "task1_udp.awk")
to compute total bytes of UDP/CBR traffic:</li>

<br><tt>awk '$1=="r" &amp;&amp; $7==3 &amp;&amp; $17==2 &amp;&amp; $9=="cbr"
{b += $11} END {print b}' task1_out.nam</tt>
<ul>&nbsp;</ul>

<li>
Now you can compute the total bytes of TCP/FTP and UDP/CBR traffic and
the ratios of TCP/FTP and UDP/CBR traffic by using a more elaborate Awk
script (in file "task1_total.awk"):</li>

<br><tt>awk '{if ($1== "r" &amp;&amp; $7==3 &amp;&amp; $17==1 &amp;&amp;
$9=="tcp") {a += $11} else if ($1== "r"&nbsp; &amp;&amp; $7==3 &amp;&amp;
$17==2 &amp;&amp; $9=="cbr") {b += $11}} END {printf (" tcp:\t%d\n cbr:\t%d
\n total:\t%d\n tcp ratio:\t%.4f \n cbr ratio:\t%.4f\n", a, b, a+b, a/(a+b),
b/(a+b))}' task1_out.nam</tt></ul>

<p><br>Let's take a look at the Tcl scripts in "task1_sample.tcl", and
go through the sequence of required steps to set up and solve a simulation
problem:
</p><ul>
<li>
As the first step, we create the simulator object.</li>

<ul><tt># create a simulator object</tt>
<br><tt>set ns [new Simulator]</tt></ul>

<li>
Set up the network topology by creating node objects, and connecting the
nodes with link objects. If the output queue of a router is implemented
as a part of a link, we need to specify the queue type. In this project,
DropTail queue is used. In some cases, we may define the layout of the
network topology for better NAM display.</li>

<ul><tt># create four nodes</tt>
<br><tt>set node1 [$ns node]</tt>
<br><tt>set node2 [$ns node]</tt>
<br><tt>set node3 [$ns node]</tt>
<br><tt>set node4 [$ns node]</tt>
<p><tt># create links between the nodes</tt>
<br><tt>$ns duplex-link $node1 $node3 2Mb 20ms DropTail</tt>
<br><tt>$ns duplex-link $node2 $node3 2Mb 20ms DropTail</tt>
<br><tt>$ns duplex-link $node3 $node4 1Mb 20ms DropTail</tt>
<br><tt>$ns queue-limit $node3 $node4 4</tt>
</p><p><tt># set the display layout of nodes and links for nam</tt>
<br><tt>$ns duplex-link-op $node1 $node3 orient right-down</tt>
<br><tt>$ns duplex-link-op $node2 $node3 orient right-up</tt>
<br><tt>$ns duplex-link-op $node3 $node4 orient right</tt>
</p><p><tt># define different colors for nam data flows</tt>
<br><tt>$ns color 0 Green</tt>
<br><tt>$ns color 1 Blue</tt>
<br><tt>$ns color 2 Red</tt>
<br><tt>$ns color 3 Yellow</tt>
</p><p><tt># monitor the queue for the link between node 2 and node 3</tt>
<br><tt>$ns duplex-link-op $node3 $node4 queuePos 0.5</tt>
<br>&nbsp;</p></ul>

<li>
Define traffic patterns by creating agents, applications and flows. In
NS2, packets are always sent from one agent to another agent or a group
of agents. In addition, we need to associate these agents with nodes.</li>

<ul><tt># TCP traffic source</tt>
<br><tt># create a TCP agent and attach it to node node1</tt>
<br><tt>set tcp [new Agent/TCP]</tt>
<br><tt>$ns attach-agent $node1 $tcp</tt>
<br><tt>$tcp set fid_ 1</tt>
<br><tt>$tcp set class_ 1</tt>
<p><tt># window_ * (packetsize_ + 40) / RTT</tt>
<br><tt>$tcp set window_ 30</tt>
<br><tt>$tcp set packetSize_ $packetSize</tt>
</p><p><tt># create a TCP sink agent and attach it to node node4</tt>
<br><tt>set sink [new Agent/TCPSink]</tt>
<br><tt>$ns attach-agent $node4 $sink</tt>
</p><p><tt># connect both agents</tt>
<br><tt>$ns connect $tcp $sink</tt>
</p><p><tt># create an FTP source "application";</tt>
<br><tt>set ftp [new Application/FTP]</tt>
<br><tt>$ftp attach-agent $tcp</tt>
</p><p><tt># UDP traffic source</tt>
<br><tt># create a UDP agent and attach it to node 2</tt>
<br><tt>set udp [new Agent/UDP]</tt>
<br><tt>$udp set fid_ 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
# red color</tt>
<br><tt>$ns attach-agent $node2 $udp</tt>
</p><p><tt># create a CBR traffic source and attach it to udp</tt>
<br><tt>set cbr [new Application/Traffic/CBR]</tt>
<br><tt>$cbr set packetSize_ $packetSize</tt>
<br><tt>$cbr set rate_ 0.25Mb</tt>
<br><tt>$cbr set random_ false</tt>
<br><tt>$cbr attach-agent $udp</tt>
</p><p><tt># creat a Null agent (a traffic sink) and attach it to node 4</tt>
<br><tt>set null [new Agent/Null]</tt>
<br><tt>$ns attach-agent $node4 $null</tt>
<br><tt>$ns connect $udp $null</tt>
<br>&nbsp;</p></ul>

<li>
Define the trace files, and place monitors at places in the topology to
collect information about packets flows. NS2 supports two primary monitoring
capabilities: traces and monitors. The traces enable recording of packets
whenever an event such as packet drop or arrival occurs in a queue or a
link. The monitors provide a means for collecting quantities, such as number
of packet drops or number of arrived packets in the queue. The monitor
can be used to collect these quantities for all packets or just for a specified
flow (a flow monitor).</li>

<ul><tt># open the nam trace file</tt>
<br><tt>set nam_trace_fd [open tcp_tahoe.nam w]</tt>
<br><tt>$ns namtrace-all $nam_trace_fd</tt>
<br><tt>set trace_fd [open tcp_tahoe.tr w]</tt>
<p><tt>#Define a 'finish' procedure</tt>
<br><tt>proc finish {} {</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; global ns nam_trace_fd
trace_fd</tt>
</p><p><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # close the nam trace
file</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $ns flush-trace</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; close $nam_trace_fd</tt>
</p><p><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # execute nam on the
trace file</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; exit 0</tt>
<br><tt>}</tt>
<br>&nbsp;</p></ul>

<li>
Schedule the simulation by defining the start and stop of the simulation,
traffic flows, tracing, and other events.</li>

<ul><tt># schedule events for all the flows</tt>
<br><tt>$ns at 0.25 "$ftp start"</tt>
<br><tt>$ns at 0.25 "$cbr start"</tt>
<br><tt>$ns at 5.0 "$cbr stop"</tt>
<br><tt>$ns at 5.0 "$ftp stop"</tt>
<p><tt># call the finish procedure after 6 seconds of simulation time</tt>
<br><tt>$ns at 6 "finish"</tt>
</p><p><tt># run the simulation</tt>
<br><tt>$ns run</tt>
<br>&nbsp;</p></ul>

<li>
Finally we need to extract useful data from the traces, as you just
did using Awk commands, and feed it to plotting software to get human
readable results.  In the individual tasks below, each task is
prefaced with the name of the files you should hand in with respect to that subtask. </li> </ul>

<p><br>(a) (report.pdf) Based on the execution results of previous Awk
commands, which of TCP/FTP or UDP/CBR uses more bandwidth in the
bottleneck link from node 3 to node 4?
</p><p>(b) (report.pdf, task1_b.tcl) Revise the sample code "task1_sample.tcl" so that the rate of
UDP/CBR traffic changes from 0.2 Mbps to 1 Mbps in steps of 0.2 Mbps.
At each instance, run the simulation, and use given Awk scripts to
compute the total bytes of TCP/FTP, the total bytes of UDP/CBR
traffic. Plot the results. Which flow uses more bandwidth in the bottleneck link from node 3 to node 4? Do both flows receive 
a "fair share" of the available bandwidth of the bottleneck link? Which
flow is favored in this scenario? What is the reason?

</p><center><img src="ns2.proj1_files/fig2.jpg" height="210" width="398">
<br>Figure 2</center>

<p>(c) (task1_c.tcl, task1_c_total.awk, report.pdf) Now node 5 is added.
It is connected to node 3. The link between node 5 and node 3 has a speed
of 2 Mbps and a propagation delay of 10 ms. The new network topology is
shown in Figure 2. One more UDP/CBR flow (at rate of 0.4 Mbps) from node
5 to node 4 is generated. In addition, the rate of UDP/CBR flow from node
2 to node 4 changes to be 1 Mbps. Revise the sample code "task1_sample.tcl"
for the new network, and run the simulation. Revise the sample Awk command
in file "task1_c_total_sample.awk" to compute the total bytes of TCP, the
total bytes of UDP/CBR traffic from node 2 to node 4, and the total bytes
of UDP/CBR traffic from node 5 to node 4. Do both UDP/CBR flows receive
a "fair share" of the available bandwidth of the bottleneck link?
<br>&nbsp;

</p><p> (d) (task1_d.tcl, task1_d_total.awk, report.pdf) Replace the
UDP/CBR flow in "task_1_sample.tcl" with another TCP/FTP flow.  Make
both flows start at a close time to each other.  Increase the delay on
the link between node 3 and 4 going from 10 msec to 40 msec in steps of
5 msec.  After running the simulations, plot the throughput of the two
TCP connections against the delay of the link.  You have to change
task1_total_sample.awk to extract the throughput of the two TCP
connections.  Are the two connections getting a "fair share" of the
available bandwidth?  Any guesses why?

</p>

<h2>Task 2: TCP Analysis (50%)</h2>

<p>This project requires understanding of
end-to-end control mechanisms, router control mechanisms, and application control
mechanisms. You have to prepare a report explaining the graphs obtained in each
part. Your explanation has to address three areas:</p>

<ol>
	<li>A description of effects and mechanisms observed, 
	</li><li>A discussion of the advantages and disadvantages of the observed
behavior, and 
	</li><li>A suggestion for an improvement.
The questions included in each part are just an indication of how you should
analyze the graphs. In addition to this, you are required to modify certain
parameters in the TCL program of some tasks, in order to explain the
dependencies between the parameters. 
</li></ol>


<p><b>File conventions: </b></p>


<ul>
	<li>There will be two types of scripts: TCL script (*.tcl) and gnuplot script (*.dem).
	</li><li>You can start the simulation by typing, for example, <code>ns xxx.tcl</code>

	</li><li>After the simulation run, you will find several new files in the same
directory: 
	<ul>
		<li>*.nam are output files, which will be read by <code>nam</code> (animator)

		</li><li>*.tr are tracefiles, which will be read by <code>gnuplot</code>
to generate the graphs. You can also use other software (e.g., Matlab) to plot the graphs 
	</li></ul>

	</li><li>You can start <code>gnuplot</code> from ns or
independently by typing, for example, <code>gnuplot yyy.dem</code>

	</li><li>nam can be started by typing, for example, <code>nam zzz.nam</code>.
</li></ul>

<h3>Task 2A (report.pdf 25%): How RTT affects resource sharing among TCP flows </h3>

<p>You need to run <i>proj3A.tcl </i>to
generate a graph showing the throughput of two TCP flows. You need to include the
graph in your <tt>report.pdf</tt>. You also have to vary
the RTT of one flow in the TCL script (NOTE: change the delay of a link) so
that you can demonstrate how TCP flows split the available capacity according
to the round trip time (RTT). You have to prepare a
report. In your report, you have to answer the following questions about <i>Graph3.A</i>:

</p><ol>
	<li>Do the two TCP flows interfere with each other? (5%) 
	</li><li>What is the ratio of the bandwidth allocation of the two flows? (5%) 
	</li><li>What is the reason for the low bandwidth allocation of one TCP flow? (7%) 
	</li><li>How could this problem be resolved? (8%) 
</li></ol>

<p>The link capacity of all links is 10Mbps.</p>

<p><b>Hint: </b></p>

<ul>
	<li>You can comment out the line <code>exec nam proj3A.nam &amp;</code>
 if the nam animator takes too long to show up.

	</li><li>You can plot Graph 3.1 using other tools (e.g., Matlab)
by using the data file proj3A_gpout1.tr generated by the simulation. In this
case, you can comment out the line <code>exec gnuplot proj3A.dem &amp;</code>
</li></ul>


<h3>Task 2B (report.pdf 25%): Analyze how an application can improve quality of service </h3>

<p>An application (e.g. web browser)
can "improve" the service quality by opening several TCP connections at a time
instead of just one. The Graph3.B, which has been generated by running <i>proj3B.tcl</i>,
shows the performance improvement of such an approach. Using this kind of
approach, non-altruistic Internet users can benefit, reducing the performance
for everybody else. In your report, you have to address the following
questions.

</p><ol>
	<li>What do you observe in the graph? (4% + 7%) 

	</li><li>How much is the improvement different between the two approaches? (7%)

	</li><li>How can such an unfair behavior be avoided? (7%)
</li></ol>
You need to include the graph in your <tt>report.pdf</tt>. 
<p></p>

<h3>Turn-in:</h3>

<pre>	$ turnin assignment4@network report.pdf task1_b.tcl task1_c.tcl, task1_c_total.awk task1_d.tcl, task1_d_total.awk
</pre>

<!--
<h3>Task 2: Wireless Simulation</h3>

<p>
The goal of this task is to give you some experience with wireless
network simulation as well as some MAC analysis. We will use as our
starting script for this task is task2_sample.tcl script (based on the
simple-wireless.tcl script that comes with the NS-2 distribution in
directory ns-2.29/tcl/ex). 
</p>

<p>
Wireless simulation is different from wired one in that connectivity
and interference are often a function of distance between nodes.  So,
we don't worry about explicitly specifying links -- rather, they are
present if the nodes are "close enough" to each other.  The presence
of mobility also complicates things.  For this reasons, the simulation
keeps track of the location of nodes, and can simulate mobility by
moving them to different locations.
</p>

<p>
Notice the set of options that are created near the top of the script
that look like:
</p>

<ul><tt>set val(ifqlen)          50       ;#max packet in ifq</tt></ul>

These set up some of the important simulation parameters, that are
later passed into the simulator using 

<ul><tt>$ns_ node-config ...</tt></ul>

Note that the node-config line also includes switches for enabling
tracing at different levels.  The current setting is that the
agentTrace (TCP, UDP...) and routing trace (the routing protocol
packets) are enabled, but the macTrace is off.

The initial location of the nodes is specified using the following

<ul><tt>$node_(0) set X_ 0.0</tt>
    <tt>$node_(0) set Y_ 0.0</tt>
    <tt>$node_(0) set Z_ 0.0</tt></ul>

You can move nodes around either by using the random movement option (which we will not), or using "setdest" as follows:

<ul><tt>$ns_ at 50.0 "$node_(1) setdest 25.0 20.0 15.0"</tt></ul>

which starts <tt>$node_(1)</tt> moving to point (25,20) with a
velocity of 15m/s.

<p>
Its impractical to do mobility and traffic generation manually for
large networks; there are scripts provided with NS-2 to generate
such code automatically.  
</p>

<p>
Note that in this task, we are relying on the NS trace files (not the
nam trace files).  These have a slightly different format, and enable
tracking of more things than you get with nam.  You can still use nam
(for example to see an animation of the nodes moving).
</p>


<p><br>(a) (report.pdf) The transmission range for the nodes using the
parameters specified is 250.0 meters.  An idealized propagation model
is used such that there is perfect reception if the distance is less
than or equal to 250 and no reception if it is larger than that.  Note
that the nodes start as out of range with each other, and then start
moving towards each other.  At what simulation time is the first
packet delivered successfully?  Given the mobility pattern in the
script, at what time do the nodes actually come in range with each
other?
</p>

<p><br>(b) (report.pdf, task2_b.tcl, analysis-b.awk) Change
the script to remove mobility and place the two nodes in range with
each other.  Also, replace the FTP/TCP connection with a CBR/UDP
connection.  Increase the sending rate of the UDP connection from 0.1
Mbps to 2.1Mbps in steps of 0.2Mbps.  Plot the achieved throughput
from the connection.  Provide your script for collecting this
throughput, or otherwise explain how you obtained it.  How would you
compute the packet delay?

</p><p><br>(c) (report.pdf, task2_c.tcl,analysis-c.awk) Start from
task2_b.tcl and create another interfering connection such that the
sources are in range with each other, but the destinations are not in
range with each other.  Each connection should have a CBR/UDP
connection.  Fix the sending rate on one connection to 0.5 Mbps, and
increase the other from 0.1Mbps to 1Mbps in steps of 0.1Mbps.  Plot
the throughput of the two connections.

</p><p><br>(d) Bonus: (report.pdf, task2_d.tcl, analysis-d.awk) Change the
scenario in (c) such that the source of one connection is in
interference range with the destination of the other connection (but
not reception range).  For example, S1 can be at (250,100), D1 can be
at (450,100), S2 can be at (0,500) and D2 can be at (0,300).  Show an
example of collisions happening from the trace.  Can you see the
effect of backoff?  How many MAC level collisions are observed?
</p>

-->

<hr width="100%">

<h2>Using NS2</h2>

<p>Following are a few useful NS2 tutorial documents or web sites (you'll
find valuable information on NS2 as well as some useful simulation examples):
</p>

<ul>
<li class="MsoNormal" style="">
The <a href="http://www.isi.edu/nsnam/ns/ns-documentation.html">official
NS Manual</a> (http://www.isi.edu/nsnam/ns/ns-documentation.html)</li>

<li class="MsoNormal" style="">
NS <a href="http://www.isi.edu/nsnam/ns/ns-tutorial/index.html">workshops
and presentations</a> (http://www.isi.edu/nsnam/ns/ns-tutorial/index.html)</li>

<li class="MsoNormal" style="">
<a href="http://www.isi.edu/nsnam/ns/tutorial/index.html">Marc Greis's
Tutorial</a> for the Network simulator NS (http://www.isi.edu/nsnam/ns/tutorial/index.html)</li>

<li class="MsoNormal" style="">
A good NS tutorial: <a href="http://nile.wpi.edu/NS/">NS By Example</a>
(http://nile.wpi.edu/NS/)</li>
</ul>

Enter to the directory that stores your simulation files. Run the simulation
file saved as "task1_sample.tcl" with the command:

<tt>ns task1_sample.tcl</tt>

<p>
The execution of "task1_sample.tcl" produces a trace file "task1_out.nam".
You can use "nam" program to visualize the entire simulation by typing
following command</p>

<ul><tt>nam task1_out.nam</tt></ul> The GUI interface for NAM is
pretty intuitive; press play to play the animation from the trace


<p>Several other software tools are very useful for running the ns simulations
scripts: Otcl, Nam, Gnuplot, XGraph, Awk, and Perl. The script itself is
in Otcl, which is an object-oriented version of Tcl, a well-known scripting
language. Nam is a Tcl/Tk based animation tool for visualizing network
simulation traces and real world packet traces. Gnuplot and XGraph are
general plotting tools, and we use them to plot simulation results. Awk
and Perl are text-processing languages and we use them to parse the trace
files for further analysis. If you want more information about these software
tools, please go to class web site of Project 2.
</p><p>You may also want to install NS2 and related software package on your
LINUX machine. The <a href="http://www.isi.edu/nsnam/ns/ns-build.html">all-in-one
NS2 package</a> can be downloaded from NS2 web site (http://www.isi.edu/nsnam/ns/ns-build.html).
There is a Windows version of NS2. However, it doesn't work as well as
the UNIX/LINUX version, so use it at your own risk.
</p>

<h2>Hints &amp; Tips</h2>

<ul>

<li>
The internal identifier numbers of node 1, node 2, node 3, and node 4 in
NS2 are 0, 1, 2, and 3 respectively, as shown in the figure visualized
by nam. This will help you to understand the Awk scripts.</li>

<li>
Each of Awk scripts provided for the project has its own executable file.
You don't need to type them or paste them. But you have to make sure they
are executable. If they are not, please change their attribute by typing:</li>

<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <tt>chmod ug+x *.*</tt>

<li>
NS2 is hard to the beginner! The official NS2 documentation is the Ns Manual.
However, the tutorial for the Network Simulator provides an easy introduction
and basic usage to NS2.</li>

<ul>
<li class="MsoNormal" style="">
The official <a href="http://www.isi.edu/nsnam/ns/ns-documentation.html">Ns
Manual</a></li>

<li class="MsoNormal" style="">
<a href="http://www.isi.edu/nsnam/ns/ns-tutorial/index.html">ns workshops
and presentations</a></li>

<li class="MsoNormal" style="">
<a href="http://www.isi.edu/nsnam/ns/tutorial/index.html">Marc Greis's
tutorial</a></li>

<li class="MsoNormal" style="">
A good ns tutorial: <a href="http://nile.wpi.edu/NS/">Ns By Example</a></li>
</ul>

<li>
If you think there are problems please give all information you can obtain,
although providing possible causes of error can sometimes be of help, it
can also be misleading and confusing. It is important to provide as much
information as possible. The reason is that what you think is wrong may
not be the actual cause of the problem.</li>
</ul>

<h2>FAQs</h2>

<ul>
<li>
We will test your implementation on Linux machines of testbed. If you
implement your scripts on Windows, you have to port your implementation
and make it work on the testbed</li>

<li>
<a href="http://www.isi.edu/nsnam/nam/">Nam</a>, a Tcl/TK based visualization
tool for viewing NS2 network simulation traces and real world packet traces</li>

<li>
<a href="http://www.tcl.tk/man/">Tcl/Tk Manual</a> Pages</li>

<li>
<a href="http://otcl-tclcl.sourceforge.net/otcl/">OTcl</a>, an extension
to Tcl/Tk for object-oriented programming.</li>

<li>
<a href="http://www.gnu.org/software/gawk/manual/gawk.html">Awk</a>, a
text-processing programming language</li>

<li>
<a href="http://www.gnuplot.info/">Gnuplot</a>, a command-line driven program
for producing 2D and 3D plots (<a href="http://www.cs.uni.edu/Help/gnuplot/">tutorial</a>)</li>

<li>
<a href="http://www.isi.edu/nsnam/xgraph/">XGraph</a>,&nbsp; a fairly straightforward
program that plots graphs</li>
</ul>



</body></html>